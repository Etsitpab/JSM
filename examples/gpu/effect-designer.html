<!DOCTYPE html>
<html>
  <head>
    <title>GPU Processing UI</title>

    <meta charset="UTF-8">

    <link rel="stylesheet" type="text/css" href="../common/FileLoader.css"/>
    <link rel="stylesheet" type="text/css" href="effect-designer.css"/>

    <script type="text/javascript" src="GLEffect.class.js"></script>
    <script type="text/javascript" src="GLEffect.more.js"></script>
    <script type="text/javascript" src="../common/Shortcuts.object.js"></script>
    <script type="text/javascript" src="../common/FileLoader.class.js"></script>
    <script type="text/javascript" src="../common/Webcam.class.js"></script>
    <script type="text/javascript" src="../common/FileLoader-Webcam.ext.js"></script>
    <script type="text/javascript" src="EffectUI.class.js"></script>
    <script type="text/javascript" src="effect-designer.js"></script>
    <script type="text/javascript">
    <!--
        function $(id) {
            return document.getElementById(id);
        }
    //-->
    </script>

  </head>
  <body onload="init()">

    <!-- Effect list -->
    <div id="menu" class="left-column">
      <div>
        <input type="text" id="chrono" disabled
               title="Last running time of the set of effect"/>
      </div>
      <p>
        <label for="parameters">Parameters</label>:<br/>
        <select id="parameters" size="3"
                title="Parameters of the effects"
                onchange="Effects.displayParameter()">
        </select><br/>
        <input type="text" id="parameter"
               onblur="Effects.updateParameter(true)"/>
      </p>
      <p>
        <label for="effects">Effects</label>:<br/>
        <select id="effects" size="3"
                title="List of active filters (double-click to turn on/off)"
                onchange="Effects.toHTML()"
                ondblclick="Effects.toggle(event)">
        </select><br/>
        <input type="button" value="&#8657;" class="arrows"
               title="Move first (Ctrl+Shift+PageUp)"
               onclick="Effects.move(0, false)" />
        <input type="button" value="&#8639;" class="arrows"
               title="Move up (Ctrl+Shift+ArrowUp)"
               onclick="Effects.move(-1, true)" />
        <input type="button" value="&#8642;" class="arrows"
               title="Move down (Ctrl+Shift+ArrowDown)"
               onclick="Effects.move(+1, true)" />
        <input type="button" value="&#8659;" class="arrows"
               title="Move last (Ctrl+Shift+PageDown)"
               onclick="Effects.move(-1, false)" />

               <br/>
        <select id="effect-samples"
                title="Import predefined effects"
                onchange="Effects.load()">
          <option value="">Import...</option>
        </select>
      </p>
      <div id="resizer"></div>
    </div>

    <!-- Image set -->
    <div id="images" class="right-column">Images</div>

    <!-- Output image -->
    <div id="outputs" class="right-column">
      <p class="bold">TODO</p>
      <ul>
        <li>Firefox: bug when double-click to capture image</li>
        <li>Firefox: setParameters: bug when usec with conv3x1</li>
        <li>Bug: call "run" when opts has changed</li>
        <li>Test everything, including Firefox + Android</li>
      </ul>
      <p class="bold">How to use it:</p>
      <ul>
        <li>Load images or video (drag'n'drop them or click the "<tt class="bold">+</tt>" slot).</li>
        <li>Select a loaded image or video by clicking on it.</li>
        <li>Import existing effects using the left menu.</li>
        <li>If any, set parameters using the left menu.</li>
        <li>Enjoy!</li>
      </ul>
    </div>

    <!-- Editing area -->
    <div id="editor" class="right-column" style="display: none">
      <input type="text" id="name" size="20" class="bold"
             oninput="Effects.updateName()"/>
      <input type="checkbox" id="enabled"
             title="Toggle the effect"
             onchange="Effects.toggle()"/>
      <input type="button" value="Compile" class="bold" id="compileButton"
             title="Compile the effect (Ctrl+Enter)"
             onclick="Effects.fromHTML()"/>
      <input type="button" value="Close"
             title="Close and discard changes (Escap)"
             onclick="Effects.stopEditing()"/>
      <input type="button" value="Delete"
             title="Delete the effect"
             onclick="Effects.remove()"/><br/>
      <input type="text" id="opts" size="40" disabled
             title="Current options"/>
      <input type="button" value="Set options..."
             title="Set optional effect arguments"
             onclick="Effects.promptOpts()"/><br/>
      <textarea id="sourceCode" cols="80" rows="5"></textarea>
    </div>

  </body>
</html>
