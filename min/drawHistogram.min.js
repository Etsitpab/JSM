/**
 * This program is free software: you can redistribute it and/or modify    
 * it under the terms of the GNU General Public License as published by        
 * the Free Software Foundation, either version 3 of the License, or 
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 * 
 * @author Baptiste Mazin     <baptiste.mazin@telecom-paristech.fr> 
 * @author Guillaume Tartavel <guillaume.tartavel@telecom-paristech.fr> 
 */
(function(){if(typeof window==="undefined"){return}HTMLCanvasElement.prototype.drawHistogram=function(e,t,i,n,o,l){"use strict";var r=this.getContext("2d"),a=this.width,s=this.height;var f=0,h=s-30;var v=a-80,b=s-45,T=0;var c=function(e){r.font=Math.round(Math.min(a,s)/15)+"pt sans-serif";r.textAlign="center";r.textBaseline="middle";if(e===undefined){e="Histogram"}r.fillText(e,a/2,15)};var g=function(e){if(e){r.clearRect(0,0,a,s)}r.lineWidth=.5;r.beginPath();r.strokeStyle="black";r.strokeRect(0,0,a,s);r.save();r.translate((a-v)/2,s-20);r.strokeStyle="black";r.lineWidth=.5;r.beginPath();r.moveTo(-10,0);r.lineTo(v,0);r.moveTo(0,0);r.lineTo(0,-b);r.moveTo(0,-.9*b);r.lineTo(-5,-.9*b);r.stroke()};var u=function(){r.font="8pt Arial";r.strokeStyle="black";r.fillStyle="black";var i;for(i=0;i<e.length;i++){if(e[i]>f){f=e[i]}}if(f>t){t=f}if(t>0){t=1/t}r.beginPath();r.stroke()};var d=function(){var i=Math.round;for(var n=0;n<e.length;n++){var l=-e[n]*t*.9*b;r.fillStyle=o==="hue"?"hsl("+i(n/e.length*360)+", 100%, 50%":o?o:"rgb(0, 128, 255)";r.fillRect(n*T+4,0,T-4,l)}};var k=function(t){r.lineWidth=2;r.strokeStyle="rgb(255, 0, 128)";r.beginPath();for(var i=0;i<t.length;i++){if(t[i].bins[1]>=t[i].bins[0]){r.moveTo(t[i].bins[0]*T+2,0);r.lineTo(t[i].bins[0]*T+2,-.9*b);r.lineTo((t[i].bins[1]+1)*T+2,-.9*b);r.lineTo((t[i].bins[1]+1)*T+2,0)}else{r.moveTo(t[i].bins[0]*T+2,0);r.lineTo(t[i].bins[0]*T+2,-.9*b);r.lineTo(e.length*T+2,-.9*b);r.moveTo(0,-.9*b);r.lineTo((t[i].bins[1]+1)*T+2,-.9*b);r.lineTo((t[i].bins[1]+1)*T+2,0)}}r.stroke()};c(i);g(l===false?false:true);if(!e){r.restore();return}T=(v-20)/e.length;u();d();if(n){k(n)}r.restore()}})();