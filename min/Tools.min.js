/**
 * This program is free software: you can redistribute it and/or modify    
 * it under the terms of the GNU General Public License as published by        
 * the Free Software Foundation, either version 3 of the License, or 
 * (at your option) any later version.
 * 
 * This program is distributed in the hope that it will be useful,
 * but WITHOUT ANY WARRANTY; without even the implied warranty of
 * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 * GNU General Public License for more details.
 * 
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 * 
 * @author Baptiste Mazin     <baptiste.mazin@telecom-paristech.fr> 
 * @author Guillaume Tartavel <guillaume.tartavel@telecom-paristech.fr> 
 */
var Tools={};if(typeof window==="undefined"){module.exports.Tools=Tools}(function(e){"use strict";e.isSet=function(e){return e!==null&&e!==undefined}.bind(e);e.isInRange=function(e,r,n){r=this.isSet(r)?r:-Infinity;n=this.isSet(n)?n:+Infinity;return r<=e&&e<=n}.bind(e);e.isNumber=function(e,r,n){return typeof e==="number"&&this.isInRange(e,r,n)}.bind(e);e.isInteger=function(e,r,n){return this.isNumber(e,r,n)&&e%1===0}.bind(e);e.isBoolean=function(e){return e===true||e===false}.bind(e);e.isArrayLike=function(e){return typeof e==="object"&&e.length!==undefined}.bind(e);e.isArrayInRange=function(e,r,n){var t,i;if(!this.isArrayLike(e)){return false}for(t=0,i=e.length;t<i;t++){if(!this.isInRange(e[t],r,n)){return false}}return true}.bind(e);e.isArrayOfNumbers=function(e,r,n){var t,i;if(!this.isArrayLike(e)){return false}r=this.isSet(r)?r:-Infinity;n=this.isSet(n)?n:+Infinity;for(t=0,i=e.length;t<i;t++){var a=e[t];if(!(typeof a==="number"&&r<=a&&a<=n)){return false}}return true}.bind(e);e.isArrayOfIntegers=function(e,r,n){var t,i;switch(e.constructor){case Int8Array:case Int16Array:case Int32Array:if(r===undefined&&n===undefined){return true}for(t=0,i=e.length;t<i;t++){if(e[t]<r||e[t]>n){return false}}return true;case Uint8ClampedArray:case Uint8Array:case Uint16Array:case Uint32Array:if((r===0||r===undefined)&&n===undefined){return true}if(n!==undefined){for(t=0,i=e.length;t<i;t++){if(e[t]<r||e[t]>n){return false}}}return true;default:if(!this.isArrayLike(e)){return false}}r=this.isSet(r)?r:-Infinity;n=this.isSet(n)?n:+Infinity;for(t=0,i=e.length;t<i;t++){var a=e[t];if(!(typeof a==="number"&&(r<=a&&a<=n)&&a%1===0)){return false}}return true}.bind(e);e.isArrayOfBooleans=function(e){var r,n;if(!this.isArrayLike(e)||e.length<1){return false}for(r=0,n=e.length;r<n;r++){if(e[r]!==true&&e[r]!==false){return false}}return true}.bind(e);e.checkOpts=function(e,r){var n;r=r||{};for(n in r){if(r.hasOwnProperty(n)){if(e[n]===undefined){throw new Error("checkOpts: unknown option: "+n)}}}for(n in e){if(e.hasOwnProperty(n)){if(!this.isSet(r[n])){r[n]=e[n]}}}return r};e.checkSize=function(e,r){e=this.isSet(e)?e:[0,0];if(this.isNumber(e)){e=[e]}if(this.isArrayLike(e)&&e.length===1&&this.isArrayLike(e[0])){e=e[0]}if(!this.isArrayLike(e)||e.length<1){throw new Error("checkSize: Invalid size argument.")}if(!this.isArrayOfIntegers(e,0)){throw new Error("checkSize: Size must be a positive integer.")}e=Array.prototype.slice.apply(e);while(e[e.length-1]===1&&e.length>2){e.pop()}if(e.length===1){switch(r){case"square":e=[e[0],e[0]];break;case"row":e=[1,e[0]];break;case"column":case"vector":case undefined:e=[e[0],1];break;default:throw new Error('checkSize: Invalid value for "unidim".')}}return e}.bind(e);e.checkSizeEquals=function(e,r,n){e=this.checkSize(e);r=this.checkSize(r);n=n||true;var t=e.length<r.length?e:r;var i,a=Math.min(e.length,r.length);var s=Math.max(e.length,r.length);for(i=0;i<a;i++){if(e[i]!==r[i]){throw new Error("checkSizeEquals: dimensions must be equals.")}}if(n){for(i=a;i<s;i++){if(e[i]!==undefined&&e[i]!==1){throw new Error("checkSizeEquals: dimensions must be equals.")}if(r[i]!==undefined&&r[i]!==1){throw new Error("checkSizeEquals: dimensions must be equals.")}}}else if(!n){throw new Error("checkSizeEquals: "+"dimensions differ by trailing 1's, ","and ignoreTrailingDims is False.")}return t}.bind(e);e.checkRange=function(e){if(typeof e==="number"){e=[e]}if(!this.isArrayOfIntegers(e)){throw new Error("checkRange: range must be made of integers.")}if(e.length===1){e=[0,e[0]]}if(e.length!==2){throw new Error("checkRange: range must have 1 or 2 bounds.")}if(e[0]>e[1]){throw new Error("checkRange: range must be [min, max] in this order.")}e=[e[0],e[1]];return e}.bind(e);e.checkColon=function(e,r){if(this.isArrayLike(e)&&e.length===1&&this.isArrayLike(e[0])){e=e[0]}if(this.isNumber(e)){e=[e]}if(!this.isArrayOfNumbers(e)){throw new Error("checkColon: colon operator must be non-negative integers.")}var n,t,i=null;switch(e.length){case 0:throw new Error("checkColon: colon operator cannot be empty.");case 1:n=t=e[0];break;case 2:n=e[0];t=e[1];break;case 3:n=e[0];i=e[1];t=e[2];break;default:throw new Error("checkColon: colon operator expected 1, 2, or 3 values.")}if(!this.isSet(r)){r=Infinity}else if(this.isInteger(r,0)){n=n>=0?n:n+r;t=t>=0?t:t+r}else{throw new Error("checkColon: if specified, length must be a non-negative integer.")}if(!this.isArrayOfIntegers([n,t])){throw new Error("checkColon: first and last elements must be integers")}if(!this.isArrayOfIntegers([n,t],0,r-1)){throw new Error("checkColon: first or last elements out of bounds")}if(!this.isSet(i)){i=n<=t?+1:-1}else if((t-n)*i<0){throw new Error("checkColon: invalid step.")}return[n,i,t]}.bind(e);e.checkArrayEquals=function(e,r){var n=e.length,t;if(n!==r.length){return false}for(t=0;t<n;t++){if(e[t]!==r[t]){return false}}return true};e.checkType=function(e){if(typeof e==="function"){e=e.name}if(typeof e==="string"){switch(e.toLowerCase()){case"array":return Array;case"float64array":case"float64":case"double":return Float64Array;case"float32array":case"float32":case"float":case"single":return Float32Array;case"int8array":case"int8":return Int8Array;case"bool":case"boolean":case"logical":case"uint8clampedarray":case"canvaspixelarray":case"uint8c":return Uint8ClampedArray;case"uint8array":case"uint8":return Uint8Array;case"int16array":case"int16":return Int16Array;case"uint16array":case"uint16":return Uint16Array;case"int32array":case"int32":return Int32Array;case"uint32array":case"uint32":return Uint32Array;case"int64":case"uint64":throw new Error("checkType: int64 and uint64 aren't supported.");default:throw new Error("checkType: Type must be a valid numeric class name.")}}if(e===undefined){return Matrix.dataType}throw new Error("checkType: Wrong data type argument.")};e.includeJS=function(e,r){var n=document.createElement("script");n.setAttribute("type","text/javascript");n.setAttribute("src",e);if(this.isSet(r)){n.onload=r}document.head.appendChild(n)}.bind(e);e.assert=function(e){if(!e){throw new Error("Assertion failed.")}return true}.bind(e);(function(){var r=function(e){return e>64&&e<91?e-65:e>96&&e<123?e-71:e>47&&e<58?e+4:e===43?62:e===47?63:0};var n=function(e){return e<26?e+65:e<52?e+71:e<62?e-4:e===62?43:e===63?47:65};e.arrayFromBase64=function(e,n){var t=e.replace(/[^A-Za-z0-9\+\/]/g,"");var i=t.length;var a=i*3+1>>2;var s=new Uint8Array(a);for(var o,u,c=0,f=0,h=0;h<i;h++){u=h&3;c|=r(t.charCodeAt(h))<<18-6*u;if(u===3||i-h===1){for(o=0;o<3&&f<a;o++,f++){s[f]=c>>>(16>>>o&24)&255}c=0}}return n?new n(s.buffer):s};e.arrayToBase64=function(e){e=new Uint8Array(e.buffer);var r=2,t="";for(var i=e.length,a=0,s=0;s<i;s++){r=s%3;if(s>0&&s*4/3%76===0){t+="\r\n"}a|=e[s]<<(16>>>r&24);if(r===2||e.length-s===1){t+=String.fromCharCode(n(a>>>18&63),n(a>>>12&63),n(a>>>6&63),n(a&63));a=0}}return t.substr(0,t.length-2+r)+(r===2?"":r===1?"=":"==")}})();e.stringToDownload=function(e,r){var n=new Blob([e],{type:"text/plain"});var t=document.createElement("a");t.download=r||"file.txt";t.href=URL.createObjectURL(n);t.click()};(function(){var r=[],n={};e.tic=function(e){if(e){n[e]=(new Date).getTime()}else{r.push((new Date).getTime())}};e.toc=function(e){var t=(new Date).getTime();if(e){return t-n[e]||0}return t-r.pop()||0}})()})(Tools);